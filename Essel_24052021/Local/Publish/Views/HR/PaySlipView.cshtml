@model EsselTestLocalApplication.Models.HR.PaySlipGeneration
<div class="modal-dialog modal-lg">
    <!-- Modal content-->
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body" style="overflow-x:hidden">
            @*<form onsubmit="return false">*@
            <div class="container col-md-12" id="tblprint" style="border:3px solid gray">

                <div class="col-md-12">
                    <div class="row  text-center">
                        <h3>
                            ESSEL PROJECTS PVT LTD.
                        </h3>
                    </div>
                    <div class="row text-center">
                        <h4 style="text-align:center">
                            NO-5 , FIRST FLOOR, MARUTI HERITAGE PACHPEDI NAKA, RAIPUR -492001
                            STATEMENT OF PAY AND ALLOWANCES FOR THE MONTH OF : Jun-2019
                        </h4>
                    </div>
                </div>
                @foreach (var item in Model.PSReportData)
                {
                    <div class="col-md-6">
                        <table align="right">
                            <tr>
                                <td>
                                    <label style="margin-top:5px">EMPLOYEE CODE:</label>
                                </td>
                                <td>
                                    @item.EmployeeCode
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label style="margin-top:5px">DESIGNATION:</label>
                                </td>
                                <td>
                                    @item.Designation
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label style="margin-top:5px">DEPARTMENT:</label>
                                </td>
                                <td>
                                    @item.Department
                                </td>
                            </tr>
                            <tr>
                                <td><label style="margin-top:5px">COST CENTER:</label></td>
                                <td>
                                    @item.CCCode
                                </td>
                            </tr>
                            <tr>
                                <td><label style="margin-top:5px">LOCATION:</label></td>
                                <td>
                                    @item.Location
                                </td>
                            </tr>
                            <tr>
                                <td><label style="margin-top:5px">TOTAL DAYS:</label></td>
                                <td>
                                    @item.TotalDays
                                </td>
                            </tr>
                            <tr>
                                <td><label style="margin-top:5px">PAYABLE DAYS:</label></td>
                                <td>
                                    @item.PayableDays
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <table align="right">
                            <tr>
                                <td>
                                    <label style="margin-top:5px">Name:</label>
                                </td>
                                <td>
                                    @item.Name
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label style="margin-top:5px">BANK:</label>
                                </td>
                                <td>
                                    @item.Bankname
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label style="margin-top:5px">A/C No:</label>
                                </td>
                                <td>
                                    @item.ACNO
                                </td>
                            </tr>
                            <tr>
                                <td><label style="margin-top:5px">PF A/C No:</label></td>
                                <td>
                                    @item.PF
                                </td>
                            </tr>
                            <tr>
                                <td><label style="margin-top:5px">UAN:</label></td>
                                <td>
                                    @item.UAN
                                </td>
                            </tr>
                            <tr>
                                <td><label style="margin-top:5px">ESI NO:</label></td>
                                <td>
                                    @item.ESI
                                </td>
                            </tr>
                            <tr>
                                <td><label style="margin-top:5px">LOP:</label></td>
                                <td>
                                    @item.LOP
                                </td>
                            </tr>
                        </table>
                    </div>
                }
                <div class="col-md-12">
                    <table id="Leavedetails" style="width:100%" class="hover stripe nowrap example dataTable no-footer">
                        <thead>
                            <tr><th colspan="4">Leave Details</th></tr>
                            <tr>
                                <th>Leave Type</th>
                                <th> OP.BALANCE</th>
                                <th>AVAILED</th>
                                <th>CLOSING BALANCE</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.PSLeaveData)
                            {
                                <tr style="align-items:center">
                                    <td class="txtcls">
                                        @Html.DisplayFor(modelItem => item.LeaveType)
                                    </td>
                                    <td class="txtcls">
                                        @Html.DisplayFor(modelItem => item.OpeningBalance)
                                    </td>
                                    <td class="txtcls">
                                        @Html.DisplayFor(modelItem => item.AvailedLeave)
                                    </td>
                                    <td class="txtcls">
                                        @Html.DisplayFor(modelItem => item.ClosingBalance)
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <div class="col-md-12">
                    <table id="Earningdetails" style="width:100%" class="hover stripe nowrap example dataTable no-footer">
                        <thead>
                            <tr>
                                <th>SALARY DETAILS</th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <div class="col-md-12">
                    <div class="col-md-6">
                        <table id="Earningdetails" align="right" style="width:100%" class="hover stripe nowrap example dataTable no-footer">
                            <thead>
                                <tr>
                                    <th>EARNINGS</th>
                                    <th>Rs</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.PSEarningData)
                                {
                                    <tr style="align-items:center">
                                        <td class="txtcls">
                                            @Html.DisplayFor(modelItem => item.Name)
                                        </td>
                                        <td class="txtcls">
                                            @Html.DisplayFor(modelItem => item.Amount)
                                        </td>
                                    </tr>
                                }
                            </tbody>
                            <tfoot>
                                @{
                                    int counter = 0;
                                    foreach (var item in Model.PSEarningData)
                                    {
                                        <tr>
                                            @if (counter == 0)
                                            {
                                                <td>Gross Salary</td>
                                                <td> @item.TotalEarn</td>
                                                <input type="hidden" value="@item.TotalEarn" id="GrossEarnings" />
                                                counter++;
                                            }
                                        </tr>
                                    }
                                }
                            </tfoot>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <table id="Deductiondetails" align="left" style="width:100%" class="hover stripe nowrap example dataTable no-footer">
                            <thead>
                                <tr>
                                    <th>DEDUCTIONS</th>
                                    <th>Rs</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.PSDeducationData)
                                {
                                    <tr style="align-items:center">
                                        <td class="txtcls">
                                            @Html.DisplayFor(modelItem => item.Name)
                                        </td>
                                        <td class="txtcls">
                                            @Html.DisplayFor(modelItem => item.Amount)
                                        </td>
                                    </tr>
                                }
                            </tbody>
                            <tfoot>
                                @{
                                    int counter1 = 0;
                                    foreach (var item in Model.PSDeducationData)
                                    {
                                        <tr>
                                            @if (counter1 == 0)
                                            {
                                                <td>Total Deductions</td>
                                                <td> @item.TotalDed</td>
                                                <input type="hidden" value="@item.TotalDed" id="GrossDeduction" />
                                                counter1++;
                                            }
                                        </tr>
                                    }
                                }

                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-12">
                <table id="GrossSalary" style="width:100%" class="hover stripe nowrap example dataTable no-footer">
                    <tr>
                        <input type="text" class="form-control" value="" readOnly="readOnly" id="Netpay" />
                    </tr>

                </table>
            </div>
            <div class="col-md-12">
                <table id="GrossSalaryinwords" style="width:100%" class="hover stripe nowrap example dataTable no-footer">
                    <tr>
                        <input type="text" class="form-control" value="" readOnly="readOnly" id="Netpayinwords" />
                    </tr>

                </table>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        var Earning = $("#GrossEarnings").val();
        var Deduction = $("#GrossDeduction").val();
        var net = parseFloat($("#GrossEarnings").val()) - parseFloat($("#GrossDeduction").val())
        $("#Netpay").val('NET PAY:-' + net);
        convertNumberToWords(net);
    });    
    function convertNumberToWords(amount) {
        var words = new Array();
        words[0] = '';
        words[1] = 'One';
        words[2] = 'Two';
        words[3] = 'Three';
        words[4] = 'Four';
        words[5] = 'Five';
        words[6] = 'Six';
        words[7] = 'Seven';
        words[8] = 'Eight';
        words[9] = 'Nine';
        words[10] = 'Ten';
        words[11] = 'Eleven';
        words[12] = 'Twelve';
        words[13] = 'Thirteen';
        words[14] = 'Fourteen';
        words[15] = 'Fifteen';
        words[16] = 'Sixteen';
        words[17] = 'Seventeen';
        words[18] = 'Eighteen';
        words[19] = 'Nineteen';
        words[20] = 'Twenty';
        words[30] = 'Thirty';
        words[40] = 'Forty';
        words[50] = 'Fifty';
        words[60] = 'Sixty';
        words[70] = 'Seventy';
        words[80] = 'Eighty';
        words[90] = 'Ninety';
        amount = amount.toString();
        var atemp = amount.split(".");
        var number = atemp[0].split(",").join("");
        var n_length = number.length;
        var words_string = "";
        if (n_length <= 9) {
            var n_array = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0);
            var received_n_array = new Array();
            for (var i = 0; i < n_length; i++) {
                received_n_array[i] = number.substr(i, 1);
            }
            for (var i = 9 - n_length, j = 0; i < 9; i++ , j++) {
                n_array[i] = received_n_array[j];
            }
            for (var i = 0, j = 1; i < 9; i++ , j++) {
                if (i == 0 || i == 2 || i == 4 || i == 7) {
                    if (n_array[i] == 1) {
                        n_array[j] = 10 + parseInt(n_array[j]);
                        n_array[i] = 0;
                    }
                }
            }
            value = "";
            for (var i = 0; i < 9; i++) {
                if (i == 0 || i == 2 || i == 4 || i == 7) {
                    value = n_array[i] * 10;
                } else {
                    value = n_array[i];
                }
                if (value != 0) {
                    words_string += words[value] + " ";
                }
                if ((i == 1 && value != 0) || (i == 0 && value != 0 && n_array[i + 1] == 0)) {
                    words_string += "Crores ";
                }
                if ((i == 3 && value != 0) || (i == 2 && value != 0 && n_array[i + 1] == 0)) {
                    words_string += "Lakhs ";
                }
                if ((i == 5 && value != 0) || (i == 4 && value != 0 && n_array[i + 1] == 0)) {
                    words_string += "Thousand ";
                }
                if (i == 6 && value != 0 && (n_array[i + 1] != 0 && n_array[i + 2] != 0)) {
                    words_string += "Hundred and ";
                } else if (i == 6 && value != 0) {
                    words_string += "Hundred ";
                }
            }
            words_string = words_string.split("  ").join(" ");
        }
        $("#Netpayinwords").val(words_string+'Only/-');
    }
</script>